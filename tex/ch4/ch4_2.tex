\section{Detekce}
\label{chap:detekce}

V tomto oddílu se zaměříme na první z problémů, který je způsobený tím, že v uspořádání na obr. \ref{fig:zakladni-schema} neměříme přímo stočení polarizace vzorkem, tj. neplatí vzorec \eqref{eqn:mustek-delta-beta}: $\Udif/2\Usum\neq\Delta\beta$.
Příčiny jsou dvě: zrcadla mezi vzorkem a můstkem měnící polarizaci, a nedokonalost vlnové destičky a děliče v můstku.

V tomto oddílu naplno využijeme formalismus \emph{Stokesových kovektorů} -- lineárních forem na prostoru Stokesových vektorů, které popisují detektory a složitější detekční systémy složené z detektorů a optických prvků -- rozvinutý v dodatku \ref{app:kovektory}.
Pomocí něj vysvětlíme podstatu problémů a popíšeme několik způsobů, jakým vliv zrcadel a nedokonalostí prvků kompenzovat.
Nakonec v oddílu \ref{chap:elipticita} popíšeme způsob využití Berekova kompenzátoru v můstku, který umožňuje současné měření stočení i elipticity.

Pro další použití na obr. \ref{fig:kovektor-ideal-mustek} vykreslujeme kovektory můstku s idealizovanými prvky (jako v oddílu \ref{chap:mustek-kap2}).
$\Dtks'$ značíme kovektory vzhledem ke světlu před děličem, $\Dtks''$ vzhledem ke světlu před destičkou.

\begin{figure}[htbp]
    \centering
    \missingfigure{kovektory idealni}
    \caption{Stokesovy kovektory ideálního můstku. (a) Vzhledem ke světlu před děličem. (b) Vzhledem ke světlu před destičkou. (c) Ilustrace významu $\Dtks'$ a $\Dtks''$.}
    \label{fig:kovektor-ideal-mustek}
\end{figure}

\subsection{Kompenzace nedokonalostí a zrcadel}
Jedna z výhod formalismu Stokesových kovektorů snadné uvažování o tom, jak se detekční aparatura chová při malých změnách (nedokonalostech) optických prvků.
Zaměříme se na tři druhy druhy nedokonalostí, z nichž se nakonec jediná vyplatí kompenzovat -- nepřesné fázové zpoždění půlvlnné destičky.

Pro vyvažovací půlvlnnou destičku uvažujeme dva druhy nedokonalosti: rozdílnou propustnost obou módů a fázové zpoždění lišící se od přesné hodnoty $\pi/2$.
Kvůli symetrii však stále požadujeme, aby destička měla dvě navzájem kolmé optické osy -- dva vlastní módy navzájem ortogonálních lineárních polarizací.

Experimentálně bylo ověřeno, že polarizační dělič vysoce kvalitně dělí svazek na dvě ortogonální lineární polarizace.
V odraženém svazku je sice zastoupeny obě polarizace, ale kvůli mírně odlišnému úhlu lomu se prostorově oddělí.
Vložením polarizátoru před dělič a jeho vhodným otáčením bylo možné ho zkřížit vzhledem k oběma ramenům (zvlášť) s extinkčním poměrem $I_\textrm{min}/I_\textrm{max} \approx \num{1e-4}$.
Díky tomu se nijak neprojeví ani případná polarizační závislost detektorů.
Jediná nedokonalost zbytku můstku (nezahrnující půlvlnnou destičku) je tedy vyjádřena rozdílnou citlivostí obou ramen na příslušné lineární polarizace, která je způsobena jak rozdílnou propustností/odrazivostí děliče, tak nevyváženou citlivostí a zesílení obou detektorů.

Všechny tři zmíněné nedokonalosti uvažujeme zvlášť a zanedbáváme jejich vzájemné působení.
Nakonec se zaměříme na to, co se stane, když před můstek umístíme retardér -- zrcadlo nezbytné pro oddělení dopadajícího a odraženého svazku v reflexní geometrii, a pro vyvedení svazku ven z komory kryostatu v transmisní geometrii.


\subsubsection*{Nevyváženost ramen}
Rozdíl citlivostí ramen je vyjádřen $\eta$, takže vzhledem ke světlu před děličem
\begin{align}
    {\Dtks'}^\textrm{A}=\frac{1+\eta}{2}(1, 1, 0, 0) \,,\\
    {\Dtks'}^\textrm{B}=\frac{1-\eta}{2}(1, -1, 0, 0) \,,\\
    {\Dtks'}^\textrm{A-B}=(\eta, 1, 0, 0) \,,\\
    {\Dtks'}^\textrm{A+B}=(1, \eta, 0, 0) 
\end{align}
a vzhledem ke světlu před destičkou
\begin{align}
    {\Dtks''}^\textrm{A-B}=(\eta, \cos(\theta_{\lambda/2}), \cos(\theta_{\lambda/2}), 0) \,,\\
    {\Dtks''}^\textrm{A+B}=(1, \eta\cos(\theta_{\lambda/2}), \eta\cos(\theta_{\lambda/2}), 0) 
\end{align}

Prvním z projevů je polarizační závislost součtového signálu (${d'_1}^\textrm{A+B}=\eta\neq=0$).
To není velký problém, protože se ve vzorci $\Delta\beta=\Udif/2\Usum$ používá pouze pro normalizaci signálu, která lze určit i jiným způsobem (viz např. oddíl \ref{chap:elipticita}). 
Pro malé $\eta$ však není od věci tento vliv ignorovat.

Druhou známkou nevyvážených ramen je nenulové  ${d'_0}^\textrm{A-B}$, které se projeví posunutím nulové kružnice, viz obr. \ref{fig:mustek-nedokonale-ramena} (a), po otočení půlvlnnou destičkou pak \ref{fig:mustek-nedokonale-ramena} (b).
Důležitým rysem je, že nulová kružnice je vždy kolmá na rovník lineárních polarizací, což znamená, že $\partial\Udif/\partial\chi = 0$, a tedy v měřeném signálu se neprojeví změny elipticity\footnote{V prvním řádu, pokud do můstku vstupuje lineárně polarizované světlo.}.
I druhý projev tedy v důsledku pouze mění konstantu úměrnosti, pro $\chi=0$ platí
\begin{equation}
    \textrm{d}\Udif = 2I\cos(\eta) \textrm{d}\beta \,,
\end{equation}
což pro malé $\eta$ ignorujeme.

\begin{figure}[htbp]
    \centering
    \missingfigure{nedokonale ramena}
    \caption{Kovektory můstku s nevyváženými rameny pro světlo (a) před děličem, (b) před destičkou.}
    \label{fig:mustek-nedokonale-ramena}
\end{figure}

\subsubsection*{Rozdílná propustnost destičky}
Jonesova a Muellerova matice destičky s přesným fázovým zpožděním $\pi/2$, ale rozdílnou propustností obou lineárních polarizací je (pro $\theta_{\lambda/2}=0$)
\begin{equation}
    \mathcal{T}_{\lambda/2} = \begin{pmatrix} 1&0 \\ 0&-\eta \end{pmatrix} \,, \quad
    \M_{\lambda/2} = \begin{pmatrix} 1&0&0&0 \\ 0&0&0&0 \\ 0&0&0&0 \\ 0&0&0&-1 \end{pmatrix} \,,
\end{equation}
kde nedokonalost destičky je vyjádřena $\eta$ (ideální destička má $\eta=0$)
Akce takové Muellerovy matice je kombinace otočení o \SI{180}{\degree} a protáhnutí/posunutí kolem stejné osy\footnote{To lze nahlédnout z toho, že lze Jonesovu matici psát jako součin unitární a pozitivně semi-definitní hermitovské matice, které spolu komutují: $\mathcal{T}_{\lambda/2} = \begin{pmatrix} 1&0\\0&-1 \end{pmatrix} \begin{pmatrix} 1&0\\0&\eta \end{pmatrix}$.} -- procházející lineárními polarizacemi ve směru optické osy $\theta_{\lambda/2}$.

Výsledkem je stejně jako v případě nevyvážených ramen posunutí nulové kružnice (${d''_0}^\textrm{A-B}\neq0$), které v souladu s diskuzí v předešlém oddílu pro malé $\eta$ ignorujeme.

\subsubsection*{Nepřesné fázové zpoždění destičky}
Jonesova a Muellerova matice je (pro $\theta_{\lambda/2}=0$)
\begin{equation}
    \mathcal{T}_{\lambda/2} = \begin{pmatrix} 1&0 \\ 0&-e^{i\delta} \end{pmatrix} \,, \quad
    \M_{\lambda/2} = \begin{pmatrix} 1&0&0&0 \\ 0&0&0&0 \\ 0&0&0&0 \\ 0&0&0&-1 \end{pmatrix} \,,
\end{equation}
kde nedokonalost je vyjádřena dodatečným fázovým zpožděním $\delta$ (ideální destička má $\delta=0$).
Muellerova matice působí jako rotace o $\SI{180}{\degree}+\delta$ kolem osy vlastních módů.
Kvůli $\delta\neq0$ již nejsou obě osy destičky ekvivalentní.
Pozice destičky $\theta_{\lambda/2}$ a $\theta_{\lambda/2}+\SI{90}{\degree}$ tedy také nejsou ekvivalentní, odpovídají rotacím kolem té stejné osy o $\SI{180}{\degree}+\delta$, ale opačným směrem\footnote{Ekvivalentně s opačným znaménkem $\delta$.}.
Pozice $\theta_{\lambda/2}$ a $\theta_{\lambda/2}+\SI{180}{\degree}$ zůstávají nadále ekvivalentní.

Transformací ideálního kovektoru ${\Dtks'}^\textrm{A-B}=(0, 1, 0, 0)$ (vzhledem ke světlu před děličem) neideální Muellerovou maticí $\M_{\lambda/2}$ je zachováno ${d''_0}^\textrm{A-B}=0$.
Oproti předchozím případům však již není zachovaná kolmost nulové kružnice a rovníku lineárních polarizací, tj. ${d''_3}^\textrm{A-B}\neq0$.
Platí
\begin{equation}
    {\Dtks''}^\textrm{A-B} \equiv (0,\, \cos2\zeta_2\cos2\zeta_1,\, \cos2\zeta_2\sin2\zeta_1,\, \sin2\zeta_1) \,,
\end{equation}
kde jsme označili úhel průsečíku kružnice s rovníkem $\zeta_1(\theta_{\lambda/2})$ a jimi svíraný úhel $\zeta_2(\theta_{\lambda/2})$, viz obr. \ref{fig:mustek-nedokonale-desticka}.

\begin{figure}[htbp]
    \centering
    \missingfigure{mustek destika nepresna}
    \caption{Kovektor můstku s destičkou s nepřesným fázovým zpožděním. Je naznačen také diferenciál Stokesova vektoru.}
    \label{fig:mustek-nedokonale-desticka}
\end{figure}

Vyvážením můstku pro dané $\beta$ je nastaveno takové $\theta_{\lambda/2}$, aby platilo $\beta=\zeta_1(\theta_{\lambda/2})$.
Pak platí (viz \eqref{eqn:Stokes-diferencial} pro tvar $\textrm{d}\Stks$)
\begin{equation}
    \textrm{d}\Udif = {\Dtks''}^\textrm{A-B} \cdot \textrm{d}\Stks^\textrm{in} = 2I\left(\cos\zeta_2 \textrm{d}\beta + \sin\zeta_2\textrm{d}\chi\right) 
\end{equation}
s $\zeta_2$ dosazeným pro vyváženou polohu $\theta_{\lambda/2}$.

Zde však už narážíme na závažný problém: v měřeném signálu se nám projevují i změny elipticity neznámým faktorem $\sin\zeta_2$, které se navíc mění (i znaménko), v závislosti na $\beta$.
Řešení nabízí\todopn{zmínit TO?} skutečnost\footnote{Lze nahlédnout ze symetrie vůči obrácení točivosti světla či přímým výpočtem.}, že $\zeta_2$ je pro každé $\beta$ lichou funkcí nedokonalosti destičky $\delta$ -- mění znaménko při vyvážení polohami $\theta_{\lambda/2}$, resp. $\theta_{\lambda/2}+\SI{90}{\degree}$.
V praxi tedy měříme každé $\beta$ s oběma polohami destičky a bereme jejich aritmetický průměr
\begin{equation}
    \frac{1}{2}\left(\Udif^{\theta_{\lambda/2}}+\Udif^{\theta_{\lambda/2}+\SI{90}{\degree}}\right) = 2I\cos\zeta_2 \textrm{d}\beta \,.
\end{equation}
Změny elipticity se odečetly a jediný zbývající vliv je v dodatečném faktoru $\cos\zeta_2$, který pro malé $\delta$ (a tedy malé $\zeta_2$) zanedbáváme.
Pokud není explicitně uvedeno jinak (v oddílech \ref{chap:elipticita} a \ref{chap:ferh-field-cooling}), provádíme tento krok vždy.
Ilustrace dat, která ukazují na nutnost provádět popsanou kompenzaci, je na obr. \ref{fig:mustek-desticka-ilustrace}.
Potvrzením správnosti kroků jsou ovšem až výsledky dosažené v kap. \ref{chap:5}.

Poznamenejme, že uvedená procedura funguje pouze za předpokladu, že do destičky dopadá přibližně lineárně polarizované světlo, protože jenom pak jsou obě vyvažující polohy destičky posunuté přesně o \SI{90}{\degree}.
Při dopadu eliptického světla je situace výrazně složitější a dále se jí nezabýváme.

\begin{figure}[htbp]
    \centering
    \missingfigure{destikcy data}
    \caption{Ilustrace potřeby provádět kompenzaci nepřesného fázového zpoždění vyvažovací destičky. (a) Změřená data, která se liší pro dvě polohy destičky, které by pro ideální destičky byly ekvivalentní. (b) Schéma experimentu: CoFe, pokojová teplota, transmisní geometrie, žádná zrcadla mezi vzorkem a můstkem.}
    \label{fig:mustek-desticka-ilustrace}
\end{figure}

\subsubsection*{Zrcadla}

Ve schématu experimentu na obr. \ref{fig:zakladni-schema} se v transmisní i reflexní geometrii vyskytují v dráze svazku mezi vzorkem a můstkem zrcadla.
Důvody jsou čistě logistické, v reflexi je nutné odražený svazek prostorově oddělit od dopadajícího, v transmisi je nutné svazek vyvést z kryogenní komory.
V obou případech svazek dopadá pod úhlem \SI{45}{\degree}.

Experimentálně bylo zjištěno, že odraz od použitých zrcadel není izotropní.
Odražené světlo dosahuje ve studovaném rozsahu vlnových délek elipticity až \SI{10}{\degree}\todo{kolik}.
Zrcadlo modelujeme jako retardér s Jonesovou maticí
\begin{equation}
    \mathcal{T}_m = \begin{pmatrix} 1&0\\0&e^{i\delta} \end{pmatrix} \,.
\end{equation}

Vzhledem k nutnosti kompenzace nedokonalosti destičky, které vyžaduje, aby do ní vstupovala přibližně lineární polarizace,se všechno úsilí k řešení tohoto problému soustředilo na kompenzaci zrcadla -- vložení dalšího optického prvku, který působí inverzně.
Nejprve však ztratíme pár slov o tom, jaký by mělo zrcadlo vliv na ideální můstek.
Ve Stokesově kovektoru se to projeví podobně jako destička s dodatečným fázovým zpožděním ($\Dtks'''$ vzhledem ke světlu před zrcadlem)
\begin{equation}
    {\Dtks'''}^\textrm{A-B}=
\end{equation}




\subsection{Současné měření elipticity}
\label{chap:elipticita}
